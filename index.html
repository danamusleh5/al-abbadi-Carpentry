<!DOCTYPE HTML>
<!--
	Massively by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>

<head>

    <!-- <title>Massively by HTML5 UP</title> -->
    <title>Al abbadi</title>
    <link rel="icon" type="image/png" href="images/logo.png">
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="assets/css/main.css" />
    <noscript>
        <link rel="stylesheet" href="assets/css/noscript.css" />
    </noscript>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
    <!-- SortableJS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.14.0/Sortable.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <style>
        html {
            scroll-behavior: smooth;
        }

        body {
            background-image: url('images/background.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            height: 100vh;
        }

        /* Categories Section */
        .categories {
            margin: 2rem 0;
            text-align: center;
        }

        .categories h2 {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 1rem;
            color: #333;
        }

        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            /* Responsive grid */
            gap: 20px;
            justify-items: center;
            padding: 20px;
        }

        .category-card {
            position: relative;
            width: 100%;
            max-width: 280px;
            border-radius: 15px;
            overflow: hidden;
            cursor: pointer;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .category-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }

        /* Ensuring the image fully covers the card */
        .category-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            /* Makes the image fully cover the card */
            transition: transform 0.4s ease-in-out, filter 0.3s ease-in-out;
        }

        .category-card:hover img {
            transform: scale(1.08);
            filter: brightness(0.8);
        }

        /* Gradient overlay for better readability */
        .category-card::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 40%;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.7), transparent);
        }

        /* Centering the title at the bottom */
        .category-card h3 {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-size: 18px;
            font-weight: bold;
            padding: 10px 15px;
            text-align: center;
            opacity: 1;
            transition: transform 0.3s ease, opacity 0.3s ease;
        }

        .category-card:hover h3 {
            transform: translate(-50%, -5px);
            opacity: 1;
        }

        /* Photos Section */
        .photos {
            margin: 3rem 0;
            text-align: center;
        }

        /* Responsive Grid */
        .photos-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            /* Adapts to screen size */
            gap: 20px;
            justify-items: center;
            padding: 20px;
        }

        /* Photo Card Styling */
        .photo-card {
            position: relative;
            width: 100%;
            max-width: 300px;
            border-radius: 15px;
            overflow: hidden;
            cursor: pointer;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .photo-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.2);
        }

        /* Make sure the image fully covers the card */
        .photo-card img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.4s ease-in-out, filter 0.3s ease-in-out;
        }

        /* Elegant hover effect */
        .photo-card:hover img {
            transform: scale(1.1);
            filter: brightness(0.8);
        }

        /* Gradient overlay for a sleek effect */
        .photo-card::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 40%;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.6), transparent);
        }

        /* Photo Title Styling */
        .photo-card h3 {
            position: absolute;
            bottom: 15px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-size: 18px;
            font-weight: bold;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px 15px;
            border-radius: 8px;
            opacity: 0;
            transition: opacity 0.4s ease, transform 0.3s ease;
        }

        .photo-card:hover h3 {
            opacity: 1;
            transform: translate(-50%, -5px);
        }


        #slider {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            margin: 0 auto;
            position: relative;
            /* Add this to position arrows relative to the slider */
        }

        .slider-container {
            width: 100%;
            max-width: 800px;
            /* Adjust this to control the width */
            margin: 0 auto;
            position: relative;
            overflow: hidden;
            /* Hide overflow */
        }

        .slider {
            display: flex;
            transition: transform 0.5s ease-in-out;
            /* Smooth sliding animation */
            width: 100%;
        }

        .slide {
            flex: 0 0 100%;
            /* Each slide takes full width of the container */
            display: flex;
            justify-content: space-between;
            /* Space between before and after images */
            align-items: center;
            height: 300px;
            /* Adjust height as needed */
        }

        .slide .before,
        .slide .after {
            width: 48%;
            /* Each image takes 48% of the slide width */
            height: 100%;
            overflow: hidden;
            position: relative;
            /* Ensure captions are positioned relative to the image */
        }

        .slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            /* Ensure images fit nicely */
        }

        .caption {
            position: absolute;
            /* Position captions absolutely within the image container */
            bottom: 10px;
            /* Position at the bottom of the image */
            left: 50%;
            /* Center horizontally */
            transform: translateX(-50%);
            /* Center horizontally */
            background-color: rgba(0, 0, 0, 0.7);
            /* Semi-transparent background */
            color: white;
            /* White text color */
            padding: 5px 10px;
            /* Padding for better readability */
            border-radius: 5px;
            /* Rounded corners */
            font-size: 14px;
            /* Font size */
            text-align: center;
            /* Center text */
            z-index: 2;
            /* Ensure captions are above the image */
        }

        .arrows {
            width: 48px;
            height: 48px;
            border-color: #ffffff;
            /* Arrow color */
            position: absolute;
            top: 50%;
            margin-top: -24px;
            /* Adjust to center vertically */
            cursor: pointer;
            /* Make it clickable */
            transition: opacity 0.3s ease;
            /* Smooth hover effect */
            z-index: 10;
            /* Ensure arrows are above the slider */
        }

        .arrows:hover {
            opacity: 0.7;
            /* Slight fade on hover */
        }

        .prev {
            border-bottom: 6px solid;
            /* Bottom border for the arrow */
            border-left: 6px solid;
            /* Left border for the arrow */
            transform: rotate(45deg);
            /* Rotate to create the arrow shape */
            left: 10%;
            /* Position closer to the left edge of the slide */
        }

        .next {
            border-bottom: 6px solid;
            /* Bottom border for the arrow */
            border-left: 6px solid;
            /* Left border for the arrow */
            transform: rotate(-135deg);
            /* Rotate to create the arrow shape */
            right: 10%;
            /* Position closer to the right edge of the slide */
        }

        /* Modal Overlay */
        #modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            /* Semi-transparent black */
            z-index: 999;
            /* Ensure it's below the modal but above everything else */
            backdrop-filter: blur(8px);
            /* Optional: Adds a blur effect to the background */
            display: none;
            /* Hidden by default */
        }

        /* Modal Container */
        #photo-modal {
            display: none;
            /* Hidden by default */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1000;
            /* Ensure the modal is above the overlay */
            justify-content: center;
            align-items: center;
        }

        /* Modal Container */
        #modal-container {
            background: white;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            /* Keep width as is */
            max-width: 1200px;
            height: 90%;
            max-height: 800px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow-y: auto;
            position: relative;
            z-index: 1001;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Modal Content */
        #modal-content {
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            height: 100%;
            gap: 20px;
            padding-left: 40px;
            /* Added padding-left to make space for left arrow */
        }

        /* Image Container */
        #image-container {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            width: 100%;
            height: 100%;
            max-height: 800px;
            background-color: #f0f0f0;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        #modal-content img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 10px;
            transition: transform 0.3s ease;
        }


        #modal-content img:hover {
            transform: scale(1.02);
            /* Slight zoom on hover */
        }

        /* Modal Text Container */
        #modal-text {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: flex-start;
            padding: 40px;
            background: #f9f9f9;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            max-width: 400px;
            direction: rtl;
            /* Set right-to-left direction */
        }

        /* Caption Styling */
        #modal-caption {
            font-size: 24px;
            font-weight: 600;
            color: #333;
            margin-bottom: 20px;
            line-height: 1.4;
            position: relative;
            direction: rtl;
            /* Ensure caption is displayed right-to-left */
        }

        /* Decorative Line Under Caption */
        #modal-caption::after {
            content: "";
            position: absolute;
            bottom: -10px;
            left: 0;
            width: 50px;
            height: 3px;
            background: #ff6600;
            /* Accent color */
            border-radius: 2px;
        }

        /* Phone Number Styling */
        #modal-phone {
            font-size: 18px;
            font-weight: 500;
            color: #555;
            margin-bottom: 10px;
            display: flex;
            /* For icon alignment */
            align-items: center;
            /* Center icon and text */
        }

        /* Phone Icon */
        #modal-phone::before {
            content: "📞";
            /* Phone icon */
            margin-right: 10px;
            font-size: 20px;
        }

        .modal-close-button {
            all: unset;
            /* Reset all inherited/global styles */
            position: absolute;
            top: 15px;
            right: 20px;
            color: #333;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            line-height: 1;
        }

        .modal-close-button:hover {
            color: #000;
        }

        /* Modal Arrows */
        .modal-arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            /* Center vertically */
            cursor: pointer;
            font-size: 28px;
            color: white;
            background: rgba(0, 0, 0, 0.6);
            /* Semi-transparent background */
            padding: 15px;
            border-radius: 50%;
            z-index: 1001;
            transition: background 0.3s ease;
        }

        .modal-arrow:hover {
            background: rgba(0, 0, 0, 0.8);
            /* Darker background on hover */
        }

        .modal-arrow.prev {
            left: 0px;
            /* Move it further left */
        }

        .modal-arrow.next {
            right: 20px;
        }


        /* Responsive Adjustments */
        @media (max-width: 768px) {
            #modal-container {
                flex-direction: column;
                /* Stack image and text on smaller screens */
                padding: 20px;
            }

            #modal-content {
                flex-direction: column;
                gap: 10px;
            }

            #image-container {
                max-height: 400px;
                /* Reduce image height on mobile */
            }

            #modal-text {
                padding: 20px;
                margin-left: 0;
                margin-top: 20px;
            }

            #modal-caption {
                font-size: 20px;
            }

            #modal-phone {
                font-size: 16px;
            }

            .modal-arrow {
                font-size: 24px;
                padding: 12px;
            }
        }
    </style>
</head>

<body class="is-preload">
    <!-- <header style="position: fixed; top: 20px; left: 20px; z-index: 10000;">
        <img src="images/logo2.png" alt="Logo" style="height: 50px; width: auto;">

    </header> -->

    <!-- Wrapper -->
    <div id="wrapper" class="fade-in">
        <!-- Intro -->
        <div id="intro">
            <!-- <div style="display: flex; align-items: center;"> -->
                <!-- <h1 class="logo" style="margin-top: -700px; color: rgb(255, 255, 255);">מטבחים עבאדי</h1> -->
                <!-- <img class="logo" src="images/logo2.png" alt="Logo" style="height: 50px; width: auto; margin-top: -700px;"> -->

            <!-- </div> -->
            <div style="text-align: center; margin-top: -40px;">
                <img src="images/logo.png" alt="Logo" style="height: 250px; width: auto;">
            </div>

        </div>


    </div>
    <!-- Nav -->
    <nav id="nav" dir="rtl">
        <ul class="links" style="font-weight: bold;">
            <li class="active"><a href="index.html#About">אודותינו</a></li>
            <li class="active"><a href="index.html#slider">גלארי</a></li>
            <li class="active"><a href="index.html#second">קטגוריות</a></li>
            <!-- <li class="active"><a href="index.html#feedback">משוב</a></li> -->
            <li class="active"><a href="index.html#footer">צרו קשר</a></li>
            <!-- .....Sections and nav .... Categories ..... -->
        </ul>
        <ul class="icons">
            <li>
                <a href="https://wa.me/972523230965" class="icon brands fa-whatsapp" target="_blank"
                    style="color: rgb(63, 170, 63);">
                    <span class="label">WhatsApp</span>
                </a>
            </li>
        </ul>
    </nav>

    <!-- Main -->
    <div id="main">
        <!-- Featured Post -->
        <article class="post featured">
            <header class="major">
                <h2 id="About">מטבחים עבאדי</h2>
            </header>
            <p dir="rtl" style="text-align: right; font-size: 24px;">
                מפעל בוטיק למטבחים בהתאמה אישית עם ניסיון של 26 שנים בתחום. אנו מתמחים בעיצוב, תכנון וייצור מטבחים
                איכותיים תוך הקפדה על פרטים, שימוש בחומרים הטובים ביותר, ושירות אישי וחם לכל לקוח. לאורך השנים
                סיפקנו מאות פרויקטים מוצלחים המשלבים חדשנות, פונקציונליות ועיצוב מרשים – בהתאמה מלאה לצרכי הלקוח
            </p>
        </article>

        <!-- Slider -->
        <div id="slider">
            <div class="slider-container">
                <div class="slider">
                    <!-- Slide 1 -->
                    <div class="slide">
                        <div class="before">
                            <img src="images/type1.jpeg" alt="Before 1">
                            <div class="caption">גוף סנדוויץ אדום <br> ציפוי פורמייקה <br> מגירות בלום אינטיבו
                            </div>
                        </div>
                        <div class="after">
                            <img src="images/kitchen1.jpeg" alt="After 1">
                            <div class="caption"></div>
                        </div>
                    </div>
                    <!-- Slide 2 -->
                    <div class="slide">
                        <div class="before">
                            <img src="images/type2.jpeg" alt="Before 2">
                            <div class="caption">גוף סנדוויץ אדום <br> ציפוי פולימר <br> מגירות בלום לגראבוקס</div>
                        </div>
                        <div class="after">
                            <img src="images/kitchen2.jpeg" alt="After 2">
                            <div class="caption"></div>
                        </div>
                    </div>
                    <!-- Slide 3 -->
                    <div class="slide">
                        <div class="before">
                            <img src="images/type3.jpeg" alt="Before 3">
                            <div class="caption">גוף סנדוויץ אדום <br> ציפוי פורמייקה <br> מגירות בלום מריוובוקס</div>
                        </div>
                        <div class="after">
                            <img src="images/kitchen3.jpeg" alt="After 3">
                            <div class="caption"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="arrows prev"></div>
            <div class="arrows next"></div>
        </div>

        <!-- Categories Section -->
        <section class="categories">
            <h2 id="second">Categories</h2>
            <button onclick="goBack()" id="back-button" style="display: none;">Back</button> <!-- Back button -->
            <div class="categories-grid" id="category-list"></div>
        </section>

        <!-- Photos Section -->
        <section class="photos" id="photos-section" style="display: none;">
            <h2>Photos</h2>
            <button onclick="goBack()">Back to Categories</button> <!-- Back button -->
            <div class="photos-grid" id="photos-list"></div>
        </section>
    </div>


    <!-- Feedback Section
        <section id="feedback" class="categories">
            <h2>משוב</h2>
            <form id="feedback-form"
                style="max-width: 600px; margin: 0 auto; background: rgba(255,255,255,0.95); padding: 30px; border-radius: 15px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); direction: rtl;">

                <div style="margin-bottom: 20px;">
                    <label for="name" style="display: block; font-weight: bold; margin-bottom: 8px;">שם מלא</label>
                    <input type="text" id="name" name="name" required
                        style="width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 8px;">
                </div>

                <div style="margin-bottom: 20px;">
                    <label for="message" style="display: block; font-weight: bold; margin-bottom: 8px;">המשוב
                        שלך</label>
                    <textarea id="message" name="message" rows="5" required
                        style="width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 8px;"></textarea>
                </div>

                <button type="submit"
                    style="background-color: #ff6600; color: white; padding: 12px 25px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer;">
                    שלח משוב
                </button>

                <p id="feedback-response" style="margin-top: 15px; font-weight: bold; color: green; display: none;">תודה
                    על המשוב שלך!</p>
            </form>
        </section> -->

    <!-- <script>
            // Handle feedback submission without backend/email
            document.getElementById("feedback-form").addEventListener("submit", function (e) {
                e.preventDefault();
                // Show thank you message (simulated)
                document.getElementById("feedback-response").style.display = "block";
                this.reset();
            });
        </script> -->


    <!-- Footer -->
    <footer id="footer" style="display: flex; flex-wrap: wrap; justify-content: space-between; gap: 2rem;">

        <!-- Contact Info -->
        <section class="split contact" style="flex: 1; min-width: 300px;" dir="rtl">
            <section class="alt">
                <h3 style="text-align: right;">כתובת</h3>
                <p style="display: flex; align-items: flex-start; gap: 10px; text-align: right;">
                    <i class="fas fa-map-marker-alt" style="color: red; font-size: 1.8em; margin-top: 3px;"></i>
                    <span>
                        <a href="https://maps.google.com/?q=31.851648,35.167290" target="_blank"
                            style="text-decoration: none; color: inherit;">
                            רחוב 4363<br />
                            אל-בירח, ליד רוואבי, פלסטין
                        </a>
                    </span>
                </p>
            </section>

            <section>
                <h3 style="text-align: right;">טלפון</h3>
                <p style="text-align: right;"><a href="#">(052) 524-8410</a></p>
            </section>

            <section>
                <h3 style="text-align: right;">אימייל</h3>
                <p style="text-align: right;"><a href="#">Fadelfadel2211@gmail.com</a></p>
            </section>

            <section>
                <h3 style="text-align: right;">רשתות חברתיות</h3>
                <ul class="icons alt" style="text-align: right;">
                    <a href="https://wa.me/972523230965" class="icon brands fa-whatsapp" target="_blank"
                        style="font-size: 3em; color: rgb(63, 170, 63);">
                        <span class="label">WhatsApp</span>
                    </a>
                </ul>
            </section>
        </section>

        <!-- Contact Form -->
        <section style="flex: 1; min-width: 300px;">
            <form method="post" id="contact-form" action="#" dir="rtl">
                <div class="fields">
                    <div class="field">
                        <label for="name" style="text-align: right; display: block;">שם</label>
                        <input type="text" name="name" id="name" required style="text-align: right;">
                    </div>
                    <div class="field">
                        <label for="email" style="text-align: right; display: block;">אימייל</label>
                        <input type="email" name="email" id="email" required style="text-align: right;">
                    </div>
                    <div class="field">
                        <label for="message" style="text-align: right; display: block;">הודעה</label>
                        <textarea name="message" id="message" rows="3" required style="text-align: right;"></textarea>
                    </div>
                </div>
                <ul class="actions" style="text-align: right;">
                    <li><input type="submit" value="שלח הודעה" /></li>
                </ul>
            </form>
        </section>
    </footer>


    <!-- Copyright -->
    <div id="copyright">
        <ul>
            <li>&copy; Untitled</li>
            <li>Design: <a href="https://html5up.net">HTML5 UP</a></li>
        </ul>
    </div>
    </div>

    <!-- Scripts -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/jquery.scrollex.min.js"></script>
    <script src="assets/js/jquery.scrolly.min.js"></script>
    <script src="assets/js/browser.min.js"></script>
    <script src="assets/js/breakpoints.min.js"></script>
    <script src="assets/js/util.js"></script>
    <script src="assets/js/main.js"></script>

    <!-- Firebase and Categories Script -->
    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBrtITk8NwQwwomQQz0IfE4TrZurvdTWmg",
            authDomain: "cookieandcake-888f2.firebaseapp.com",
            projectId: "cookieandcake-888f2",
            storageBucket: "cookieandcake-888f2.appspot.com",
            messagingSenderId: "964637170318",
            appId: "1:964637170318:web:a6e89698f842edd199c7df",
            measurementId: "G-KN0GFTFKXP"
        };

        // Initialize Firebase
        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }
        const db = firebase.firestore();
        const storage = firebase.storage();
        //------------------------------------------------------------------------------------------------------------------------------------------------------------------->
        // Function to load categories from Firestore
        /*async function loadCategories() {
            const categoryList = document.getElementById("category-list");
            categoryList.innerHTML = ""; // Clear existing categories

            try {
                const querySnapshot = await db.collection("categories").orderBy("timestamp", "desc").get();
                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    const div = document.createElement("div");
                    div.classList.add("category-card");
                    div.innerHTML = `
                        <img src="${data.image}" alt="${data.name}">
                        <h3>${data.name}</h3>
                    `;
                    div.onclick = function () {
                        showPhotos(data.name); // Pass the category name correctly
                    };
                    categoryList.appendChild(div);
                });
            } catch (error) {
                console.error("Error loading categories:", error);
            }
        } */
        //------------------------------------------------------------------------------------------------------------------------------------------------------------------>
        // Function to show photos and upload form for a selected category
        /*	async function showPhotos(categoryName) {
    if (!categoryName || typeof categoryName !== "string") {
        console.error("Invalid category name:", categoryName);
        return;
    }

    // Hide the categories section
    document.querySelector(".categories").style.display = "none";

    // Show the photos section
    const photosSection = document.getElementById("photos-section");
    photosSection.style.display = "block";

    // Clear previous photos
    const photosList = document.getElementById("photos-list");
    photosList.innerHTML = "";

    // Fetch photos for the selected category from Firestore
    try {
        const querySnapshot = await db.collection("photos")
            .where("category", "==", categoryName) // Filter by category
            .orderBy("timestamp", "desc") // Order by timestamp
            .get();

        querySnapshot.forEach((doc) => {
            const data = doc.data();
            const div = document.createElement("div");
            div.classList.add("photo-card");
            div.innerHTML = `
                <img src="${data.photos[0]}" alt="Photo" style="cursor: pointer;">
                <p>${data.caption}</p>
                <p>Phone: ${data.phone}</p>
            `;

            
            div.onclick = function () {
    console.log("Photo card clicked!");
    showPhotoGroup(data.photos, data.caption, data.phone);
};

            photosList.appendChild(div);
        });
    } catch (error) {
        console.error("Error loading photos:", error);
    }
} */


        // Hardcoded categories with subcategories and sub-subcategories
        const categories = [
            {
                name: "מטבחי עבדי A",
                image: "images/background.png",
                subCategories: [
                    {
                        name: "צבע בתנור (שלייפלק) A.1",
                        image: "images/background.png",
                        subCategories: [
                            { name: "CNC", image: "images/background.png" }
                        ]
                    },
                    {
                        name: "פורמייקה A.2",
                        image: "images/background.png",
                        subCategories: [
                            { name: "פורמייקה A.2.1", image: "images/background.png" },
                            { name: "אקריל A.2.2", image: "images/background.png" },
                            { name: "נאנו A.2.3", image: "images/background.png" },
                            { name: "Kitchen", image: "images/background.png" }
                        ]
                    },
                ]
            },
            {
                name: "שמות חברות הפורמייקה B",
                image: "images/background.png",
                subCategories: [
                    { name: "פורמקס B.1", image: "images/background.png" },
                    { name: "בלון B.2", image: "images/background.png" },
                    { name: "אגר B.3", image: "images/background.png" },
                    { name: "בירמן B.4", image: "images/background.png" }
                ]
            }
        ];

        let currentView = "categories"; // Track the current view: "categories", "subcategories", or "subsubcategories"
        let currentCategory = null; // Track the current category
        let currentSubCategory = null; // Track the current subcategory

        // Function to toggle the back button visibility
        function toggleBackButton() {
            const backButton = document.getElementById("back-button");
            if (currentView === "categories") {
                backButton.style.display = "none"; // Hide back button in main categories
            } else {
                backButton.style.display = "block"; // Show back button in subcategories and sub-subcategories
            }
        }

        // Function to load main categories
        function loadCategories() {
            console.log("Loading main categories..."); // Debugging
            const categoryList = document.getElementById("category-list");
            categoryList.innerHTML = ""; // Clear existing categories

            categories.forEach(category => {
                const div = document.createElement("div");
                div.classList.add("category-card");
                div.innerHTML = `
            <img src="${category.image}" alt="${category.name}">
            <h3>${category.name}</h3>
        `;
                div.onclick = function () {
                    currentCategory = category; // Set the current category
                    showSubCategories(category.subCategories);
                };
                categoryList.appendChild(div);
            });

            currentView = "categories"; // Update the current view
            toggleBackButton(); // Update back button visibility

            // Show the categories section and hide the photos section
            document.querySelector(".categories").style.display = "block";
            document.getElementById("photos-section").style.display = "none";
        }

        // Function to show subcategories
        function showSubCategories(subCategories) {
            console.log("Loading subcategories..."); // Debugging
            const categoryList = document.getElementById("category-list");
            categoryList.innerHTML = ""; // Clear existing categories

            subCategories.forEach(subCategory => {
                const div = document.createElement("div");
                div.classList.add("category-card");
                div.innerHTML = `
            <img src="${subCategory.image || "images/default.jpg"}" alt="${subCategory.name}">
            <h3>${subCategory.name}</h3>
        `;
                div.onclick = function () {
                    currentSubCategory = subCategory; // ✅ Always set this first!
                    if (subCategory.subCategories && subCategory.subCategories.length > 0) {
                        showSubSubCategories(subCategory.subCategories);
                    } else {
                        showPhotos(subCategory.name);
                    }
                };
                categoryList.appendChild(div);
            });

            currentView = "subcategories"; // Update the current view
            toggleBackButton(); // Update back button visibility

            // Show the categories section and hide the photos section
            document.querySelector(".categories").style.display = "block";
            document.getElementById("photos-section").style.display = "none";
        }

        // Function to show sub-subcategories
        function showSubSubCategories(subSubCategories) {
            console.log("Loading sub-subcategories..."); // Debugging
            const categoryList = document.getElementById("category-list");
            categoryList.innerHTML = ""; // Clear existing categories

            subSubCategories.forEach(subSubCategory => {
                const div = document.createElement("div");
                div.classList.add("category-card");
                div.innerHTML = `
            <img src="${subSubCategory.image || "images/default.jpg"}" alt="${subSubCategory.name}">
            <h3>${subSubCategory.name}</h3>
        `;
                div.onclick = function () {
                    showPhotos(subSubCategory.name); // Show photos for the sub-subcategory
                };
                categoryList.appendChild(div);
            });

            currentView = "subsubcategories"; // Update the current view
            toggleBackButton(); // Update back button visibility

            // Show the categories section and hide the photos section
            document.querySelector(".categories").style.display = "block";
            document.getElementById("photos-section").style.display = "none";
        }

        // Function to show photos from Firebase
        async function showPhotos(categoryName) {
            console.log("Loading photos..."); // Debugging
            // Hide the categories section
            document.querySelector(".categories").style.display = "none";

            // Show the photos section
            const photosSection = document.getElementById("photos-section");
            photosSection.style.display = "block";

            // Clear previous photos
            const photosList = document.getElementById("photos-list");
            photosList.innerHTML = "";

            // Fetch photos for the selected category from Firestore
            try {
                const querySnapshot = await db.collection("photos")
                    .where("category", "==", categoryName) // Filter by category
                    .orderBy("timestamp", "desc") // Order by timestamp
                    .get();

                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    const div = document.createElement("div");
                    div.classList.add("photo-card");
                    div.innerHTML = `
                <img src="${data.photos[0]}" alt="Photo" style="cursor: pointer;">
                <p>${data.caption}</p>
                <p>Phone: ${data.phone}</p>
            `;

                    div.onclick = function () {
                        showPhotoGroup(data.photos, data.caption, data.phone);
                    };

                    photosList.appendChild(div);
                });
            } catch (error) {
                console.error("Error loading photos:", error);
            }

            currentView = "photos"; // Update the current view
            toggleBackButton(); // Update back button visibility
        }

        // Function to go back
        function goBack() {
            console.log("Current View:", currentView); // Debugging
            console.log("Current Category:", currentCategory?.name); // More readable
            console.log("Current Subcategory:", currentSubCategory?.name); // More readable

            if (currentView === "subcategories") {
                console.log("Going back to main categories..."); // Debugging
                currentCategory = null;
                loadCategories();

            } else if (currentView === "subsubcategories") {
                console.log("Going back to subcategories..."); // Debugging
                if (currentCategory && currentCategory.subCategories) {
                    showSubCategories(currentCategory.subCategories);
                    currentSubCategory = null; // Reset
                } else {
                    loadCategories(); // Fallback
                }

            } else if (currentView === "photos") {
                if (currentSubCategory && currentSubCategory.subCategories) {
                    console.log("Going back to sub-subcategories..."); // Debugging
                    showSubSubCategories(currentSubCategory.subCategories);
                } else if (currentCategory && currentCategory.subCategories) {
                    console.log("Going back to subcategories..."); // Debugging
                    showSubCategories(currentCategory.subCategories);
                    currentSubCategory = null;
                } else {
                    console.log("Falling back to main categories...");
                    loadCategories();
                    currentCategory = null;
                    currentSubCategory = null;
                }
            }
        }


        // Load categories on page load
        window.onload = function () {
            loadCategories();
        };


        //------------------------------------------------------------------------------------------------------------------------------------------------------------------>

        // Function to show photos in the modal
        function showPhotoGroup(photos, caption, phone) {
            modalPhotos = photos; // Store the photos
            modalCaption = caption; // Set the shared caption
            modalPhone = phone; // Set the shared phone number
            modalCurrentIndex = 0;

            // Display the first photo and the shared caption/phone
            const modalPhoto = document.getElementById("modal-photo");
            const modalCaptionElement = document.getElementById("modal-caption");
            const modalPhoneElement = document.getElementById("modal-phone");

            modalPhoto.src = modalPhotos[modalCurrentIndex]; // Use preloaded image URL
            modalCaptionElement.textContent = modalCaption; // Set the shared caption
            modalPhoneElement.textContent = `Phone: ${modalPhone}`; // Set the shared phone number

            attachArrowListeners();

            const modal = document.getElementById("photo-modal");
            const overlay = document.getElementById("modal-overlay");

            modal.style.display = "flex"; // Show the modal
            overlay.style.display = "block"; // Show the overlay
        }

        function changePhoto(direction) {


            console.log("Current Index Before:", modalCurrentIndex);
            console.log("Total Photos:", modalPhotos.length);

            modalCurrentIndex += direction;

            if (modalCurrentIndex < 0) {
                modalCurrentIndex = modalPhotos.length - 1;
            } else if (modalCurrentIndex >= modalPhotos.length) {
                modalCurrentIndex = 0;
            }

            console.log("Current Index After:", modalCurrentIndex);

            const modalPhoto = document.getElementById("modal-photo");
            modalPhoto.style.opacity = 0; // Hide the image while loading

            const img = new Image(); // Create a new image object
            img.src = modalPhotos[modalCurrentIndex]; // Load the new image

            img.onload = function () {
                modalPhoto.src = img.src; // Set the new image source
                modalPhoto.style.opacity = 1; // Show the image after it's loaded
            };

            console.log("New src attribute:", modalPhoto.src); // Debugging
        }
        // Function to attach arrow click handlers
        function attachArrowListeners() {
            const prevArrow = document.querySelector(".modal-arrow.prev");
            const nextArrow = document.querySelector(".modal-arrow.next");

            prevArrow.removeEventListener("click", handlePrevClick);
            nextArrow.removeEventListener("click", handleNextClick);

            prevArrow.addEventListener("click", handlePrevClick);
            nextArrow.addEventListener("click", handleNextClick);
        }

        function handlePrevClick(event) {
            event.stopPropagation();
            changePhoto(-1);
        }

        function handleNextClick(event) {
            event.stopPropagation();
            changePhoto(1);
        }

        function closeModal() {
            const modal = document.getElementById("photo-modal");
            const overlay = document.getElementById("modal-overlay");

            modal.style.display = "none"; // Hide the modal
            overlay.style.display = "none"; // Hide the overlay
        }
        // Load categories on page load
        window.onload = function () {
            loadCategories();
            preloadAllImages();
        };
        //------------------------------------------------------------------------------------------------------------------------------------------------------------------>


        document.addEventListener("DOMContentLoaded", function () {
            const slider = document.querySelector(".slider");
            const slides = document.querySelectorAll(".slide");
            const prevButton = document.querySelector(".prev");
            const nextButton = document.querySelector(".next");

            let currentIndex = 0; // Track the current slide index

            // Function to move to a specific slide
            function goToSlide(index) {
                if (index < 0) {
                    index = slides.length - 1; // Loop to the last slide
                } else if (index >= slides.length) {
                    index = 0; // Loop to the first slide
                }

                const offset = -index * 100; // Calculate the offset for the slide
                slider.style.transform = `translateX(${offset}%)`; // Move the slider
                currentIndex = index; // Update the current index
            }

            // Event listener for the "Next" button
            nextButton.addEventListener("click", function () {
                goToSlide(currentIndex + 1); // Move to the next slide
            });

            // Event listener for the "Previous" button
            prevButton.addEventListener("click", function () {
                goToSlide(currentIndex - 1); // Move to the previous slide
            });

            // Optional: Auto-slide functionality
            setInterval(function () {
                goToSlide(currentIndex + 1); // Automatically move to the next slide
            }, 5000); // Change slide every 5 seconds
        });

        //------------------------------------------------------------------------------------------------------------------------------------------------------------------>

        // Initialize EmailJS with your User ID
        (function () {
            emailjs.init("2K9FVyVWZebz0zgmF"); // Replace with your EmailJS User ID
        })();

        // Function to validate email format
        function validateEmail(email) {
            const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/; // Basic email regex
            return regex.test(email);
        }

        // Handle Contact Form Submission
        document.getElementById("contact-form").addEventListener("submit", async (e) => {
            e.preventDefault();

            const name = document.getElementById("name").value;
            const email = document.getElementById("email").value;
            const message = document.getElementById("message").value;

            // Validate email format
            if (!validateEmail(email)) {
                alert("Please enter a valid email address.");
                return;
            }

            if (name && email && message) {
                // Send email using EmailJS
                emailjs.send("service_aw5oxxr", "template_x9z3jke", {
                    name: name,
                    email: email,
                    message: message,
                }).then(
                    (response) => {
                        alert("Thank you for contacting us! We will get back to you soon.");
                        document.getElementById("contact-form").reset();
                    },
                    (error) => {
                        console.error("Error sending email:", error);
                        alert("An error occurred. Please try again later.");
                    }
                );
            } else {
                alert("Please fill out all fields.");
            }
        });
        //------------------------------------------------------------------------------------------------------------------------------------------------------------------>

        let allPhotos = []; // Array to store all preloaded images
        let modalCurrentIndex = 0;
        let modalPhotos = []; // Array to store photos for the current category
        let modalCaption = "";
        let modalPhone = "";

        // Function to preload all images when the website loads
        async function preloadAllImages() {
            try {
                const querySnapshot = await db.collection("photos").get(); // Fetch all photos from Firestore
                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    data.photos.forEach((photoUrl) => {
                        const img = new Image(); // Create a new image object
                        img.src = photoUrl; // Set the image source
                        allPhotos.push(img); // Add the image to the preloaded array
                    });
                });
                console.log("All images preloaded:", allPhotos); // Debugging
            } catch (error) {
                console.error("Error preloading images:", error);
            }
        }

    </script>





    <div id="photo-modal">
        <!-- Overlay -->
        <div id="modal-overlay" onclick="closeModal()"></div>

        <!-- Modal Content -->
        <div id="modal-container">
            <button class="modal-close-button" onclick="closeModal()">×</button>
            <div class="modal-arrow prev">&#10094;</div>
            <div class="modal-arrow next">&#10095;</div>

            <div id="modal-content">
                <div id="image-container">
                    <img id="modal-photo" src="" alt="Photo">
                </div>
                <div id="modal-text">
                    <p id="modal-caption">Caption Placeholder</p>
                    <p id="modal-phone">Phone: 123-456-7890</p>
                </div>
            </div>
        </div>
    </div>
</body>

</html>